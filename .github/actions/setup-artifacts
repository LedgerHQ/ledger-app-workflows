name: 'Setup Artifacts'
description: 'Centralized artifact management'
inputs:
  action:
    description: 'upload, download, or merge'
    required: true
  name:
    description: 'Artifact name'
    required: false
  path:
    description: 'Path to upload/download'
    required: false
  pattern:
    description: 'Pattern for merge'
    required: false
  if-no-files-found:
    description: 'What to do if no files found (warn, error, ignore)'
    required: false
    default: 'warn'
  delete-merged:
    description: 'Delete merged artifacts (for merge action)'
    required: false
    default: 'false'

runs:
  using: 'composite'
  steps:
    - name: Upload artifact
      if: ${{ inputs.action == 'upload' }}
      uses: actions/upload-artifact@v4
      with:
        name: ${{ inputs.name }}
        path: ${{ inputs.path }}
        if-no-files-found: ${{ inputs.if-no-files-found }}

    - name: Download artifact
      if: ${{ inputs.action == 'download' }}
      uses: actions/download-artifact@v4
      with:
        name: ${{ inputs.name }}
        path: ${{ inputs.path }}

    - name: Merge artifacts
      if: ${{ inputs.action == 'merge' }}
      uses: actions/upload-artifact/merge@v4
      with:
        name: ${{ inputs.name }}
        pattern: ${{ inputs.pattern }}
        delete-merged: ${{ inputs.delete-merged }}
